<html ng-app="app">
<head>
  <title>GPIO Rasberry Pi Control Server</title>
  <meta name="viewport" content="width=device-width">
  <meta http-equiv="content-type" content="text/html;charset=utf-8" />

<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="http://bootswatch.com/flatly/bootstrap.min.css">
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.9.0/ui-bootstrap-tpls.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.min.js"></script>


<script>
  var app = angular.module('app', ['ngRoute']);

  app.config(function($routeProvider, $locationProvider) {
    // According to someone on the web, this next line does some "magic"
    $locationProvider.hashPrefix('');
    $routeProvider
        .when('/',       { templateUrl:'ioctrl.htm', controller:'ioctrl' })
        .when('/config', { templateUrl:'config.htm', controller:'config' })
        .otherwise({redirectTo:'/'});
  });


  app.controller('navctrl', ['$scope', '$location', function($scope, $location) {
    $scope.location = $location
    $scope.organization = 'ONCAM Grandeye'

  }]);
  
  app.controller('ioctrl', function($scope) {
    $scope.organization = "ONVU/ONCAM";
    $scope.inputs = [
      {Id:4,IsActive:1,Text:'EVO-12'},
      {Id:17,IsActive:0,Text:'EVO-180'}
    ];
  });

  app.controller('config', function($scope) {
    // Nothing to do yet...
  });



  app.directive('digitalInput', function() { 
    return {
      restrict:'A',
      templateUrl:'digital-input.htm'
    }; 
  });

</script>

<script type="text/ng-template" id="ioctrl.htm">
  <p> IO Controller View </p>
  <div ng-repeat="input in inputs" digital-input></div>
</script>

<script type="text/ng-template" id="digital-input.htm">
  <b>{{input.Id}}</b> {{input.Text}} IsActive:{{input.IsActive}}
  <div class="panel panel-default">
    <div class="panel-heading">
      Input <small class="pull-right text-muted"><em>{{input.Id}}</em></small>
    </div>
    <div class="panel-body"><div>
      <p align="center"> <!-- ng-show="isConnected()" -->
        <i class="fa fa-power-off fa-3x" 
            ng-class="{'input-active':input.IsActive,'input-inactive':input.!IsActive}"></i>
      </p>
      <button class="btn btn-default btn-md btn-block"  
          id="inputButton" type="button" ng-click="getInputButton(input).action()">
          <!-- ng-show="isConnected()" ng-disabled="!isConnected()" -->
        {{input.Text}} <!-- {{getInputButton(input).text}} -->
      </button>
    </div></div>
  </div>
</script>

<script type="text/ng-template" id="config.htm">
  <p> Configuration View </p>
</script>




</head>
<body>
  <br>
  <div class="container">

    <!-- Navigation -->
    <nav class="navbar navbar-default" role="ioctrl" ng-control="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Raspberry PI I/O Controller</a>
        </div>
        <ul class="nav navbar-nav">
        </ul>
    
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li>
              <button ng-controller="navctrl" ng-click="toggleConnection()" id="connectionButton" class="btn btn-default navbar-btn">
                {{connectionButtonText()}}
              </button>
            </li>
            <li>&nbsp;&nbsp;</li>
            <li ng-class="{'active': location.path() == '/'}">
              <a href="#"><i class="fa fa-male fa-lg"></i>&nbsp;&nbsp;I/O Controller</a>
            </li>
            <li ng-class="{'active': location.path() == '/config'}">
              <a href="#config"><i class="fa fa-cog fa-lg"></i>&nbsp;&nbsp;Settings</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- View area (Controller/Settings) -->
    <div ng-view></div>

   
    <div ng-controller="navctrl">
      <p class="text-center"><small>{{organization}}  Footer text placeholder.</small></p>
    </div>
  </div>
</body>
</html>
