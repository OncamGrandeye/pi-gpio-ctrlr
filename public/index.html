<html ng-app="app">
<head>
  <title>GPIO Rasberry Pi Control Server</title>
  <meta name="viewport" content="width=device-width">
  <meta http-equiv="content-type" content="text/html;charset=utf-8" />

<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="http://bootswatch.com/flatly/bootstrap.min.css">
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.9.0/ui-bootstrap-tpls.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.min.js"></script>

<!-- include socket.io client side script -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script> 

<script src="js/app.js"></script>

<style type="text/css">
  .gpio-columns {
    display: grid;
    grid-template-columns: repeat(2, 200px);
    grid-gap: 2px;
  }

  .pin-3V3 {
    background:#f44336;
    color: #ffffff;
  }

  .pin-5V {
    background:#f44336;
    color: #ffffff;
  }

  .pin-GPIO {
    background: #f0e68c;
  }

  .pin-I2C {
    background: #4caf50;
    color: #ffffff;
  }

  .pin-SPI {
    background: #ff9800;
  }

  .pin-UART {
    background: #87ceeb;
  }

  .pin-GND {
    background: #616161;
    color: #ffffff;
  }

  .pin-DNC {
    background: #000000;
    color: #ffffff;
  }

  .pin-open {
    color: #03a711;
  }

  .pin-closed {
    color: #ff4040;
  }
</style>

<!--
<script>
var socket = io();

window.addEventListener('load', function() {
  // When the page loads...
  // Here is where the inputs are iterated...
  // Handlers for the onclick stuff... yada yada yada
  var box = document.getElementById('pin4');
  box.addEventListener('change', function() {
    socket.emit('state', {Id: 4, Action: this.checked ? 'close' : 'open'});
  });
});

socket.on('status', function(data) {
  var newState = data.State == 'closed';
  document.getElementById('pin4').checked = newState;
  socket.emit('state', {Id: 4, Action: newState ? 'close' : 'open' });
});

</script>
-->

<script type="text/ng-template" id="ioctrl.htm">
  <div class="gpio-columns">
    <div class="col-xs-6" ng-repeat="pin in pins" gpio-pin></div>
  </div>
</script>

<script type="text/ng-template" id="digital-input.htm">
</script>

<script type="text/ng-template" id="gpio-pin.htm">
  <div class="panel panel-default pin-{{pin.Type}}">
      <div class="panel-body">
        <small class="text-muted"><em>[{{pin.Pin}}]</em></small>
        <span ng-show="getGPIO(pin).relay === false">{{getGPIO(pin).text}}</span>
        <button class="btn btn-default btn-small btn-block"
               type="button" 
               ng-show="getGPIO(pin).relay" 
               ng-click="getGPIO(pin).action()">
          {{getGPIO(pin).text}}
        </button>
        <i class="fa fa-power-off fa-1x pull-right"
           ng-class="{'pin-open':getGPIO(pin).relay, 'pin-closed':getGPIO(pin).contact}"
           ng-show="pin.Type === 'GPIO'">
        </i>
      </div>
  </div>
</script>

<script type="text/ng-template" id="config.htm">
  <p> Configuration View </p>
</script>




</head>
<body>
  <br>
  <div class="container">

    <!-- Navigation -->
    <nav class="navbar navbar-default" role="navitation" ng-control="navctrl">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Raspberry PI I/O Controller</a>
        </div>
    
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li ng-class="{'active': location.path() == '/'}">
              <a href="#"><i class="fa fa-male fa-lg"></i>&nbsp;&nbsp;I/O Controller</a>
            </li>
            <li ng-class="{'active': location.path() == '/config'}">
              <a href="#config"><i class="fa fa-cog fa-lg"></i>&nbsp;&nbsp;Settings</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- View area (Controller/Settings) -->
    <div ng-view></div>

   
    <div ng-controller="navctrl">
      <p class="text-center"><small>{{organization}}  Footer text placeholder.</small></p>
    </div>
  </div>
</body>
</html>
